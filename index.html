
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ –ß–∞–ø–∞–π</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f1eb;
    }
    header {
      background-color: #8b0000;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 22px;
    }
    .categories {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin: 10px;
    }
    .categories button {
      padding: 8px 12px;
      background: #8b0000;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .menu-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      padding: 16px;
    }
    .card {
      background-color: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      cursor: pointer;
    }
    .card img {
      max-width: 100%;
      border-radius: 8px;
    }
    .card h3 {
      font-size: 16px;
      margin: 10px 0 5px;
    }
    .card p {
      margin: 0;
      color: #555;
    }
    #cartButton {
      display: block;
      margin: 0 auto 20px auto;
      padding: 12px 24px;
      background-color: #8b0000;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 18px;
      cursor: pointer;
    }
    #modal, #cartModal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: white;
      padding: 20px;
      width: 90%;
      max-width: 400px;
      border-radius: 10px;
      text-align: center;
      position: relative;
    }
    .modal-content img {
      max-width: 100%;
    }
    .close {
      position: absolute;
      top: 10px; right: 15px;
      font-size: 20px;
      cursor: pointer;
    }
    .qty-buttons {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    .qty-buttons button {
      font-size: 18px;
      width: 32px; height: 32px;
      background-color: #8b0000;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
    }
    .cart-list {
      max-height: 300px;
      overflow-y: auto;
      text-align: left;
      margin-bottom: 10px;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }
    .cart-item span {
      margin-right: 6px;
    }
    .cart-item button {
      background: none;
      border: none;
      color: red;
      cursor: pointer;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <header>üç≤ –†–µ—Å—Ç–æ—Ä–∞–Ω ¬´–ß–∞–ø–∞–π¬ª ‚Äî –ú–µ–Ω—é</header>
  <div class="categories">
    <button onclick="filterCategory('all')">–í—Å–µ</button>
    <button onclick="filterCategory('–°—É–ø—ã')">–°—É–ø—ã</button>
    <button onclick="filterCategory('–ì–æ—Ä—è—á–µ–µ')">–ì–æ—Ä—è—á–µ–µ</button>
    <button onclick="filterCategory('–ù–∞–ø–∏—Ç–∫–∏')">–ù–∞–ø–∏—Ç–∫–∏</button>
  </div>
  <div class="menu-items" id="menu"></div>
  <button id="cartButton" onclick="openCart()">üõí –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modalImg" src="" />
      <h3 id="modalTitle"></h3>
      <p id="modalDesc"></p>
      <p><strong id="modalPrice"></strong></p>
      <div class="qty-buttons">
        <button onclick="changeQty(-1)">‚ûñ</button>
        <span id="qty">1</span>
        <button onclick="changeQty(1)">‚ûï</button>
      </div>
      <button onclick="addToCart()">‚ûï –í –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>

  <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
  <div id="cartModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCart()">&times;</span>
      <h3>üõí –í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h3>
      <div class="cart-list" id="cartList"></div>
      <p id="totalAmount"><strong>–°—É–º–º–∞: 0 ‚ÇΩ</strong></p>
      <button onclick="submitOrder()">‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
      <button onclick="clearCart()">üóë –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    const cart = [];
    let qty = 1;
    let selectedItem = null;

    const menuData = [
      { id: 1, category: "–ì–æ—Ä—è—á–µ–µ", title: "–ö—É—Ä–∞ ¬´—Å –ø–µ—Ä–µ–¥–æ–≤–æ–π¬ª", price: 450, desc: "–ö—É—Ä–∏—Ü–∞ —Å –ø–µ—Ä–ª–æ–≤–∫–æ–π –∏ —É–∫—Ä–æ–ø–æ–º", img: "photos/1.jpg" },
      { id: 2, category: "–°—É–ø—ã", title: "–ü–æ—Ö–ª—ë–±–∫–∞ –æ—Ç –í–∞—Å–∏–ª–∏—è –ò–≤–∞–Ω—ã—á–∞", price: 180, desc: "–°—ã—Ç–Ω—ã–π —Å—É–ø –ø–æ —Å—Ç–∞—Ä–∏–Ω–Ω–æ–º—É —Ä–µ—Ü–µ–ø—Ç—É", img: "photos/2.jpg" },
      { id: 3, category: "–ì–æ—Ä—è—á–µ–µ", title: "–ö–∞—Ä—Ç–æ—à–∫–∞ –ø–æ-–æ–∫–æ–ø–Ω–æ–º—É", price: 190, desc: "–ñ–∞—Ä–µ–Ω—ã–π –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å —Å –∫–æ–∂—É—Ä–æ–π", img: "photos/3.jpg" },
      { id: 4, category: "–ù–∞–ø–∏—Ç–∫–∏", title: "–ö–∏—Å–µ–ª—å ¬´–ö–æ–º–∏—Å—Å–∞—Ä—Å–∫–∏–π¬ª", price: 120, desc: "–ö—Ä–∞—Å–Ω—ã–π, –∫–∞–∫ –∑–Ω–∞–º—è. –° –æ–≤—Å—è–Ω—ã–º –ø–µ—á–µ–Ω—å–µ–º", img: "photos/11.jpg" },
      { id: 5, category: "–ù–∞–ø–∏—Ç–∫–∏", title: "–ß–∞–π ¬´–ö–∏–ø—è—Ç–æ–∫ –∏–∑ –∫–æ—Ç–µ–ª–∫–∞¬ª", price: 80, desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —á—ë—Ä–Ω—ã–π —á–∞–π —Å –¥—ã–º–∫–æ–º", img: "photos/13.jpg" }
    ];

    function renderMenu(data) {
      const menu = document.getElementById("menu");
      menu.innerHTML = "";
      data.forEach(item => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <img src="${item.img}" alt="${item.title}">
          <h3>${item.title}</h3>
          <p>${item.price} ‚ÇΩ</p>`;
        card.onclick = () => openModal(item);
        menu.appendChild(card);
      });
    }

    function filterCategory(cat) {
      if (cat === 'all') renderMenu(menuData);
      else renderMenu(menuData.filter(x => x.category === cat));
    }

    function openModal(item) {
      selectedItem = item;
      qty = 1;
      document.getElementById("modalImg").src = item.img;
      document.getElementById("modalTitle").innerText = item.title;
      document.getElementById("modalDesc").innerText = item.desc;
      document.getElementById("modalPrice").innerText = `${item.price} ‚ÇΩ`;
      document.getElementById("qty").innerText = qty;
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    function changeQty(delta) {
      qty = Math.max(1, qty + delta);
      document.getElementById("qty").innerText = qty;
    }

    function addToCart() {
      const existing = cart.find(x => x.id === selectedItem.id);
      if (existing) existing.qty += qty;
      else cart.push({ ...selectedItem, qty });
      closeModal();
      alert("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É!");
    }

    function openCart() {
      const list = document.getElementById("cartList");
      list.innerHTML = "";
      let total = 0;
      cart.forEach(item => {
        total += item.price * item.qty;
        const row = document.createElement("div");
        row.className = "cart-item";
        row.innerHTML = `
          <span>${item.title} √ó ${item.qty} ‚Äî ${item.price * item.qty} ‚ÇΩ</span>
          <button onclick="removeFromCart(${item.id})">üóë</button>`;
        list.appendChild(row);
      });
      document.getElementById("totalAmount").innerText = `üí∞ –°—É–º–º–∞: ${total} ‚ÇΩ`;
      document.getElementById("cartModal").style.display = "flex";
    }

    function closeCart() {
      document.getElementById("cartModal").style.display = "none";
    }

    function removeFromCart(id) {
      const index = cart.findIndex(x => x.id === id);
      if (index !== -1) cart.splice(index, 1);
      openCart();
    }

    function clearCart() {
      cart.length = 0;
      openCart();
    }

    function submitOrder() {
      const order = cart.map(x => ({
        title: x.title,
        price: `${x.price} ‚ÇΩ`,
        qty: x.qty
      }));
      tg.sendData(JSON.stringify(order));
      alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
      cart.length = 0;
      closeCart();
    }

    // –ù–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
    renderMenu(menuData);
  </script>
</body>
</html>
