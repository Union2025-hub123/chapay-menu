<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú–µ–Ω—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ –ß–∞–ø–∞–π</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f1eb;
    }
    header {
      background-color: #8b0000;
      color: white;
      padding: 20px;
      font-size: 22px;
      text-align: center;
    }
    .filters {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      padding: 10px;
    }
    .filters button {
      padding: 6px 12px;
      background-color: #8b0000;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .container {
      padding: 16px;
    }
    .menu-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 16px;
    }
    .card {
      background-color: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      cursor: pointer;
    }
    .card img {
      max-width: 100%;
      border-radius: 8px;
    }
    .card h3 {
      margin: 10px 0 5px;
      font-size: 15px;
    }
    .card p {
      margin: 0;
      color: #444;
      font-weight: bold;
    }
    #viewCart {
      margin: 20px auto;
      display: block;
      padding: 12px 24px;
      font-size: 18px;
      background-color: #8b0000;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background-color: white;
      padding: 20px;
      width: 90%;
      max-width: 400px;
      border-radius: 10px;
      text-align: center;
      position: relative;
    }
    .modal img {
      max-width: 100%;
      border-radius: 8px;
    }
    .modal h3 { margin: 10px 0 5px; }
    .modal p { color: #444; }
    .close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 22px;
      cursor: pointer;
    }
    .qty-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }
    .qty-controls button {
      padding: 6px 10px;
      font-size: 18px;
    }
    .cart-list {
      text-align: left;
      margin-top: 10px;
    }
    .cart-list p {
      margin: 4px 0;
    }
  </style>
</head>
<body>
  <header>üç≤ –†–µ—Å—Ç–æ—Ä–∞–Ω ¬´–ß–∞–ø–∞–π¬ª ‚Äî –ú–µ–Ω—é</header>
  <div class="filters">
    <button onclick="filterMenu('–í—Å–µ')">–í—Å–µ</button>
    <button onclick="filterMenu('–°—É–ø—ã')">–°—É–ø—ã</button>
    <button onclick="filterMenu('–ì–æ—Ä—è—á–µ–µ')">–ì–æ—Ä—è—á–µ–µ</button>
    <button onclick="filterMenu('–ù–∞–ø–∏—Ç–∫–∏')">–ù–∞–ø–∏—Ç–∫–∏</button>
  </div>
  <div class="container">
    <div class="menu-items" id="menu"></div>
    <button id="viewCart">üõí –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
  </div>

  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img id="modalImg" src="" />
      <h3 id="modalTitle"></h3>
      <p id="modalPrice"></p>
      <div class="qty-controls">
        <button onclick="adjustQty(-1)">‚ûñ</button>
        <span id="modalQty">1</span>
        <button onclick="adjustQty(1)">‚ûï</button>
      </div>
      <button class="add-btn" onclick="addToCart()">‚ûï –í –∫–æ—Ä–∑–∏–Ω—É</button>
    </div>
  </div>

  <div id="cartModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeCart()">&times;</span>
      <h3>–í–∞—à –∑–∞–∫–∞–∑:</h3>
      <div id="cartList" class="cart-list"></div>
      <p id="cartTotal"></p>
      <button class="add-btn" onclick="sendCart()">‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å</button>
      <button class="add-btn" onclick="clearCart()">üóë –û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    const cart = [];
    let currentItem = {};
    let currentQty = 1;

    const menuData = [
      { title: "–ö—É—Ä–∞ ¬´—Å –ø–µ—Ä–µ–¥–æ–≤–æ–π¬ª", price: 450, img: "photos/1.jpg", category: "–ì–æ—Ä—è—á–µ–µ" },
      { title: "–©–∏ ¬´–î—É—Ö –ü–æ–±–µ–¥—ã¬ª", price: 230, img: "photos/6.jpg", category: "–°—É–ø—ã" },
      { title: "–ö–æ–º–ø–æ—Ç ¬´–¢—Ä–µ—Ç–∏–π —Ñ—Ä–æ–Ω—Ç¬ª", price: 90, img: "photos/14.jpg", category: "–ù–∞–ø–∏—Ç–∫–∏" },
    ];

    function renderMenu(category = "–í—Å–µ") {
      const container = document.getElementById("menu");
      container.innerHTML = "";
      menuData.filter(item => category === "–í—Å–µ" || item.category === category).forEach(item => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = \`
          <img src="\${item.img}" alt="">
          <h3>\${item.title}</h3>
          <p>\${item.price} ‚ÇΩ</p>
        \`;
        div.onclick = () => openModal(item);
        container.appendChild(div);
      });
    }

    function openModal(item) {
      currentItem = item;
      currentQty = 1;
      document.getElementById("modalImg").src = item.img;
      document.getElementById("modalTitle").innerText = item.title;
      document.getElementById("modalPrice").innerText = item.price + " ‚ÇΩ";
      document.getElementById("modalQty").innerText = currentQty;
      document.getElementById("modal").style.display = "flex";
    }

    function closeModal() {
      document.getElementById("modal").style.display = "none";
    }

    function adjustQty(amount) {
      currentQty = Math.max(1, currentQty + amount);
      document.getElementById("modalQty").innerText = currentQty;
    }

    function addToCart() {
      cart.push({ title: currentItem.title, price: currentItem.price + " ‚ÇΩ", qty: currentQty });
      closeModal();
      alert(\`\${currentItem.title} x\${currentQty} –¥–æ–±–∞–≤–ª–µ–Ω–æ\`);
    }

    function showCart() {
      const list = document.getElementById("cartList");
      list.innerHTML = "";
      let total = 0;
      cart.forEach(item => {
        const price = parseInt(item.price);
        total += price * item.qty;
        list.innerHTML += \`<p>‚Ä¢ \${item.title} x\${item.qty} ‚Äî \${price * item.qty} ‚ÇΩ</p>\`;
      });
      document.getElementById("cartTotal").innerText = "üí∞ –û–±—â–∞—è —Å—É–º–º–∞: " + total + " ‚ÇΩ";
      document.getElementById("cartModal").style.display = "flex";
    }

    function closeCart() {
      document.getElementById("cartModal").style.display = "none";
    }

    function sendCart() {
      tg.sendData(JSON.stringify(cart));
      closeCart();
    }

    function clearCart() {
      cart.length = 0;
      closeCart();
      alert("–ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞");
    }

    document.getElementById("viewCart").onclick = showCart;
    function filterMenu(cat) { renderMenu(cat); }
    renderMenu();
  </script>
</body>
</html>
